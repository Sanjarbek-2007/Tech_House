<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="../styles/auth.css">
    <link rel="stylesheet" href="../styles/toast.css">
    <link rel="icon" href="../photos/icons/logo_w.svg">
    <title>Auth</title>
</head>

<body>
    <div class="auth-container">
        <div class="auth-visual">
            <div class="visual-content">
                <img src="../photos/logo_w.png" alt="Logo" class="brand-logo-top">
                <h1 id="visual-title">Welcome Back.</h1>
                <p id="visual-text">Enter your credentials to access your dashboard.</p>
            </div>
        </div>

        <div class="auth-form-section">
            <!-- Simplified: Only Profile Creation -->
            <form class="auth-form" id="register-form">
                <h2>Create Profile</h2>
                <div class="input-group">
                    <label>Full Name</label>
                    <input type="text" placeholder="John Doe" required>
                </div>
                <div class="input-group">
                    <label>Email Address</label>
                    <input type="email" placeholder="name@company.com" required>
                </div>
                <!-- Password removed as per request -->

                <button type="submit" class="btn-submit">Start Shopping</button>
            </form>
        </div>
    </div>
    <script src="../scripts/auth.js"></script>
    <script src="../scripts/toast.js"></script>
    <script>
        const registerForm = document.getElementById('register-form');
        const visualTitle = document.getElementById('visual-title');
        const visualText = document.getElementById('visual-text');

        // Check if already logged in - Auto Redirect
        if (Auth.getCurrentUser()) {
            // Redirect to profile page
            // Assuming we are in /src/pages/ based on file structure
            window.location.href = 'profile_page.html';
        }

        // Handle Register
        if (registerForm) {
            registerForm.addEventListener('submit', (e) => {
                e.preventDefault();
                const inputs = registerForm.querySelectorAll('input');
                const name = inputs[0].value;
                const email = inputs[1].value;

                if (!name || !email) {
                    showToast("Please fill in fields", "warning");
                    return;
                }

                if (window.Auth) {
                    const result = Auth.register(name, email);
                    if (result.success) {
                        showToast("Profile Created! Redirecting...", "success");
                        setTimeout(() => window.location.href = '../../index.html', 1500);
                    } else {
                        showToast("Error: " + result.message, "error");
                    }
                } else {
                    showToast("Auth script not loaded", "error");
                }
            });
        }
    </script>
</body>

</html>